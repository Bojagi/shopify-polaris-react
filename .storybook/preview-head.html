<style>
  /**
   * Override dynamically generated values to be fixed values instead,
   * to eliminate false positives due to ever-changing values between Percy
   * snapshots. See https://docs.percy.io/docs/percy-specific-css.
   *
   * Selectors need to be in the format `[class^='Thing']` because compiled
   * class names have unique suffixes attached to them (for example: `Thing_20YWn`).
   */
  @media only percy {
    [class^='Loading-Level'] {
      transform: scaleX(0.1) !important;
    }

    [class^='SkeletonPage-Action'] {
      width: 80px !important;
    }
  }
</style>
<script>
  window.addEventListener('message', (event) => {
    if (event.origin === window.location.origin) return;

    const storyData = JSON.parse(
      JSON.stringify(
        window.__STORYBOOK_CLIENT_API__
          .raw()
          .map(({id, kind, name}) => ({id, kind, name})),
      ),
    );

    event.source.postMessage(
      {
        height: document.body.scrollHeight,
        storyData,
      },
      event.origin,
    );
  });
</script>
